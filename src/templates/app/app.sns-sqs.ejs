const middy = require('@middy/core');
const eventNormalizer = require('@middy/event-normalizer');
const log = require('./loggger.js');

const handler =  middy ((event,context) => {
    try {
      const { Records }  = event;
      incomingEvents = Records.map(({body})=>{
        const {Message} = body;
        return Message
    })
      //Add your business logic here
    }catch (error) {
        log.error('Error processing message:', error);
        throw error;
    }
})  

handler
  .use(eventNormalizer())
     